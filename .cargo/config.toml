# Cargo configuration for barrel-loader

[build]
# Use incremental compilation for faster rebuilds
incremental = true

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "link-arg=-Wl,-undefined,dynamic_lookup"]

[target.aarch64-unknown-linux-gnu]
rustflags = ["-C", "link-arg=-Wl,-undefined,dynamic_lookup"]

# Windows targets
[target.x86_64-pc-windows-msvc]
rustflags = []

[target.i686-pc-windows-msvc]
rustflags = []

# Optimize build times
[net]
git-fetch-with-cli = true

[profile.dev]
# Faster compile times for development
opt-level = 0
debug = true
incremental = true

[profile.release]
# Already defined in Cargo.toml, but can override here if needed
# opt-level = 3
# lto = true
# strip = true
# codegen-units = 1
